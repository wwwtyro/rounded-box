var __defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(t,r,e)=>r in t?__defProp(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,__spreadValues=(t,r)=>{for(var e in r||(r={}))__hasOwnProp.call(r,e)&&__defNormalProp(t,e,r[e]);if(__getOwnPropSymbols)for(var e of __getOwnPropSymbols(r))__propIsEnum.call(r,e)&&__defNormalProp(t,e,r[e]);return t},__require="undefined"!=typeof require?require:t=>{throw new Error('Dynamic require of "'+t+'" is not supported')},__publicField=(t,r,e)=>(__defNormalProp(t,"symbol"!=typeof r?r+"":r,e),e);!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((t="undefined"!=typeof globalThis?globalThis:t||self)["rounded-box"]={})}(this,(function(t){"use strict";var r=1e-6,e="undefined"!=typeof Float32Array?Float32Array:Array;function o(){var t=new e(3);return e!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function n(t){var r=new e(3);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r}function i(t){var r=t[0],e=t[1],o=t[2];return Math.hypot(r,e,o)}function s(t,r,o){var n=new e(3);return n[0]=t,n[1]=r,n[2]=o,n}function a(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t}function h(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t}function p(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t}function u(t,r,e,o){return t[0]=r[0]+e[0]*o,t[1]=r[1]+e[1]*o,t[2]=r[2]+e[2]*o,t}Math.hypot||(Math.hypot=function(){for(var t=0,r=arguments.length;r--;)t+=arguments[r]*arguments[r];return Math.sqrt(t)}),o();const l=[{start:s(.5,-.5,.5),right:s(0,0,-1),up:s(0,1,0)},{start:s(-.5,-.5,-.5),right:s(0,0,1),up:s(0,1,0)},{start:s(-.5,.5,.5),right:s(1,0,0),up:s(0,0,-1)},{start:s(-.5,-.5,-.5),right:s(1,0,0),up:s(0,0,1)},{start:s(-.5,-.5,.5),right:s(1,0,0),up:s(0,1,0)},{start:s(.5,-.5,-.5),right:s(-1,0,0),up:s(0,1,0)}];function c(t,r,e,n,i,s,a){const h=[];for(let p=0;p<s;p++)for(let l=0;l<a;l++){const c=u(o(),t,r,n*p/s);u(c,c,e,i*l/a);const f=u(o(),c,r,n/s),d=u(o(),f,e,i/a),_=u(o(),c,e,i/a);h.push(c,f,d,c,d,_)}return h}function f(t,r,e){const n=h(o(),r,s(.5,.5,.5));a(n,n,[e,e,e]);const i=h(o(),r,s(-.5,-.5,-.5));var l,c,f;c=i,f=[e,e,e],(l=i)[0]=c[0]+f[0],l[1]=c[1]+f[1],l[2]=c[2]+f[2];const d=p(o(),i,t);!function(t,r,e){t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2])}(d,n,d);const _=function(t,r){var e=r[0],o=r[1],n=r[2],i=e*e+o*o+n*n;return i>0&&(i=1/Math.sqrt(i)),t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t}(o(),a(o(),t,d));return{normal:_,position:u(o(),d,_,e)}}class d{constructor(){__publicField(this,"positions",[]),__publicField(this,"cells",[])}populateCell(t){0===this.cells.length&&this.cells.push([]),3===this.cells[this.cells.length-1].length&&this.cells.push([]),this.cells[this.cells.length-1].push(t)}index(t){for(const l of t){let t=!1;for(let n=0;n<this.positions.length;n++)if(e=this.positions[n],o=l,i=void 0,s=void 0,a=void 0,h=void 0,p=void 0,u=void 0,i=e[0],s=e[1],a=e[2],h=o[0],p=o[1],u=o[2],Math.abs(i-h)<=r*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(s-p)<=r*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(a-u)<=r*Math.max(1,Math.abs(a),Math.abs(u))){this.populateCell(n),t=!0;break}t||(this.positions.push(n(l)),this.populateCell(this.positions.length-1))}var e,o,i,s,a,h,p,u}}const _={width:1,height:1,depth:1,radius:.125,resolution:5};t.generateRoundedBox=function(t={}){const{width:r,height:e,depth:n,radius:a,resolution:g}=__spreadValues(__spreadValues({},_),t),b=s(r,e,n);p(b,b,[2*a,2*a,2*a]);const m=new d;for(const s of l){const t=i(h(o(),s.right,b)),r=i(h(o(),s.up,b)),e=h(o(),s.start,b),n=u(o(),e,s.right,a),p=u(o(),e,s.right,t-a),l=u(o(),e,s.up,a),f=u(o(),l,s.right,a),d=u(o(),l,s.right,t-a),_=u(o(),e,s.up,r-a),y=u(o(),_,s.right,a),M=u(o(),_,s.right,t-a);m.index(c(e,s.right,s.up,a,a,g,g)),m.index(c(p,s.right,s.up,a,a,g,g)),m.index(c(_,s.right,s.up,a,a,g,g)),m.index(c(M,s.right,s.up,a,a,g,g)),m.index(c(l,s.right,s.up,a,r-2*a,g,1)),m.index(c(d,s.right,s.up,a,r-2*a,g,1)),m.index(c(n,s.right,s.up,t-2*a,a,1,g)),m.index(c(y,s.right,s.up,t-2*a,a,1,g)),m.index(c(f,s.right,s.up,t-2*a,r-2*a,1,1))}const{positions:y,cells:M}=m,x=[];for(const o of y){const t=f(o,b,a);o[0]=t.position[0],o[1]=t.position[1],o[2]=t.position[2],x.push(t.normal)}return{positions:y.map((t=>[t[0],t[1],t[2]])),normals:x.map((t=>[t[0],t[1],t[2]])),cells:M}},Object.defineProperty(t,"__esModule",{value:!0}),t[Symbol.toStringTag]="Module"}));
