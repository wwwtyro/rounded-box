var t=Object.defineProperty,r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(r,n,i)=>n in r?t(r,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[n]=i,e=(t,e)=>{for(var s in e||(e={}))n.call(e,s)&&o(t,s,e[s]);if(r)for(var s of r(e))i.call(e,s)&&o(t,s,e[s]);return t},s=("undefined"!=typeof require&&require,(t,r,n)=>(o(t,"symbol"!=typeof r?r+"":r,n),n)),h="undefined"!=typeof Float32Array?Float32Array:Array;function a(){var t=new h(3);return h!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function u(t){var r=new h(3);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r}function p(t){var r=t[0],n=t[1],i=t[2];return Math.hypot(r,n,i)}function l(t,r,n){var i=new h(3);return i[0]=t,i[1]=r,i[2]=n,i}function c(t,r,n){return t[0]=r[0]-n[0],t[1]=r[1]-n[1],t[2]=r[2]-n[2],t}function f(t,r,n){return t[0]=r[0]*n[0],t[1]=r[1]*n[1],t[2]=r[2]*n[2],t}function g(t,r,n){return t[0]=Math.max(r[0],n[0]),t[1]=Math.max(r[1],n[1]),t[2]=Math.max(r[2],n[2]),t}function d(t,r,n,i){return t[0]=r[0]+n[0]*i,t[1]=r[1]+n[1]*i,t[2]=r[2]+n[2]*i,t}Math.hypot||(Math.hypot=function(){for(var t=0,r=arguments.length;r--;)t+=arguments[r]*arguments[r];return Math.sqrt(t)}),a();const M=[{start:l(.5,-.5,.5),right:l(0,0,-1),up:l(0,1,0)},{start:l(-.5,-.5,-.5),right:l(0,0,1),up:l(0,1,0)},{start:l(-.5,.5,.5),right:l(1,0,0),up:l(0,0,-1)},{start:l(-.5,-.5,-.5),right:l(1,0,0),up:l(0,0,1)},{start:l(-.5,-.5,.5),right:l(1,0,0),up:l(0,1,0)},{start:l(.5,-.5,-.5),right:l(-1,0,0),up:l(0,1,0)}];function b(t,r,n,i,o,e,s){const h=[];for(let u=0;u<e;u++)for(let p=0;p<s;p++){const l=d(a(),t,r,i*u/e);d(l,l,n,o*p/s);const c=d(a(),l,r,i/e),f=d(a(),c,n,o/s),g=d(a(),l,n,o/s);h.push(l,c,f,l,f,g)}return h}function m(t,r,n){const i=f(a(),r,l(.5,.5,.5));c(i,i,[n,n,n]);const o=f(a(),r,l(-.5,-.5,-.5));var e,s,h;s=o,h=[n,n,n],(e=o)[0]=s[0]+h[0],e[1]=s[1]+h[1],e[2]=s[2]+h[2];const u=g(a(),o,t);!function(t,r,n){t[0]=Math.min(r[0],n[0]),t[1]=Math.min(r[1],n[1]),t[2]=Math.min(r[2],n[2])}(u,i,u);const p=function(t,r){var n=r[0],i=r[1],o=r[2],e=n*n+i*i+o*o;return e>0&&(e=1/Math.sqrt(e)),t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t}(a(),c(a(),t,u));return{normal:p,position:d(a(),u,p,n)}}class v{constructor(){s(this,"positions",[]),s(this,"cells",[])}populateCell(t){0===this.cells.length&&this.cells.push([]),3===this.cells[this.cells.length-1].length&&this.cells.push([]),this.cells[this.cells.length-1].push(t)}index(t){for(const p of t){let t=!1;for(let u=0;u<this.positions.length;u++)if(r=this.positions[u],n=p,i=void 0,o=void 0,e=void 0,s=void 0,h=void 0,a=void 0,i=r[0],o=r[1],e=r[2],s=n[0],h=n[1],a=n[2],Math.abs(i-s)<=1e-6*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-h)<=1e-6*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(e-a)<=1e-6*Math.max(1,Math.abs(e),Math.abs(a))){this.populateCell(u),t=!0;break}t||(this.positions.push(u(p)),this.populateCell(this.positions.length-1))}var r,n,i,o,e,s,h,a}}const y={width:1,height:1,depth:1,radius:.125,resolution:5};function x(t={}){const{width:r,height:n,depth:i,radius:o,resolution:s}=e(e({},y),t),h=l(r,n,i);g(h,h,[2*o,2*o,2*o]);const u=new v;for(const e of M){const t=p(f(a(),e.right,h)),r=p(f(a(),e.up,h)),n=f(a(),e.start,h),i=d(a(),n,e.right,o),l=d(a(),n,e.right,t-o),c=d(a(),n,e.up,o),g=d(a(),c,e.right,o),M=d(a(),c,e.right,t-o),m=d(a(),n,e.up,r-o),v=d(a(),m,e.right,o),y=d(a(),m,e.right,t-o);u.index(b(n,e.right,e.up,o,o,s,s)),u.index(b(l,e.right,e.up,o,o,s,s)),u.index(b(m,e.right,e.up,o,o,s,s)),u.index(b(y,e.right,e.up,o,o,s,s)),u.index(b(c,e.right,e.up,o,r-2*o,s,1)),u.index(b(M,e.right,e.up,o,r-2*o,s,1)),u.index(b(i,e.right,e.up,t-2*o,o,1,s)),u.index(b(v,e.right,e.up,t-2*o,o,1,s)),u.index(b(g,e.right,e.up,t-2*o,r-2*o,1,1))}const{positions:c,cells:x}=u,w=[];for(const e of c){const t=m(e,h,o);e[0]=t.position[0],e[1]=t.position[1],e[2]=t.position[2],w.push(t.normal)}return{positions:c.map((t=>[t[0],t[1],t[2]])),normals:w.map((t=>[t[0],t[1],t[2]])),cells:x}}export{x as generateRoundedBox};
