var t=Object.defineProperty,e=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,r=(e,o,n)=>o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n,i=(t,i)=>{for(var s in i||(i={}))o.call(i,s)&&r(t,s,i[s]);if(e)for(var s of e(i))n.call(i,s)&&r(t,s,i[s]);return t},s=("undefined"!=typeof require&&require,(t,e,o)=>(r(t,"symbol"!=typeof e?e+"":e,o),o));import{f as l,m as a,l as p,a as c,c as h,s as u,b as m,d,e as f,n as g,g as v,h as x,R as y,t as b,i as w,j as N,p as j}from"./vendor.3b317da4.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const o of t)if("childList"===o.type)for(const t of o.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),"use-credentials"===t.crossorigin?e.credentials="include":"anonymous"===t.crossorigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const P=[{start:l(.5,-.5,.5),right:l(0,0,-1),up:l(0,1,0)},{start:l(-.5,-.5,-.5),right:l(0,0,1),up:l(0,1,0)},{start:l(-.5,.5,.5),right:l(1,0,0),up:l(0,0,-1)},{start:l(-.5,-.5,-.5),right:l(1,0,0),up:l(0,0,1)},{start:l(-.5,-.5,.5),right:l(1,0,0),up:l(0,1,0)},{start:l(.5,-.5,-.5),right:l(-1,0,0),up:l(0,1,0)}];function z(t,e,o,n,r,i,s){const l=[];for(let a=0;a<i;a++)for(let p=0;p<s;p++){const c=u(h(),t,e,n*a/i);u(c,c,o,r*p/s);const m=u(h(),c,e,n/i),d=u(h(),m,o,r/s),f=u(h(),c,o,r/s);l.push(c,m,d,c,d,f)}return l}function M(t,e,o){const n=c(h(),e,l(.5,.5,.5));m(n,n,[o,o,o]);const r=c(h(),e,l(-.5,-.5,-.5));d(r,r,[o,o,o]);const i=a(h(),r,t);f(i,n,i);const s=g(h(),m(h(),t,i));return{normal:s,position:u(h(),i,s,o)}}class O{constructor(){s(this,"positions",[]),s(this,"cells",[])}populateCell(t){0===this.cells.length&&this.cells.push([]),3===this.cells[this.cells.length-1].length&&this.cells.push([]),this.cells[this.cells.length-1].push(t)}index(t){for(const e of t){let t=!1;for(let o=0;o<this.positions.length;o++)if(v(this.positions[o],e)){this.populateCell(o),t=!0;break}t||(this.positions.push(x(e)),this.populateCell(this.positions.length-1))}}}const D={width:1,height:1,depth:1,radius:.125,resolution:5};const k=new Uint8Array(262144);k.fill(255);const q=[];for(let R=0;R<16;R++)q.push({color:255-8*(R+1),x:Math.floor(512*Math.random()),y:Math.floor(512*Math.random())});for(let R=0;R<1e5;R++)for(const t of q)Math.random()<.5?(t.x+=Math.random()<.5?1:-1,t.x=(t.x%512+512)%512):(t.y+=Math.random()<.5?1:-1,t.y=(t.y%512+512)%512),k[512*t.y+t.x]=t.color;const C=y(),L=document.getElementsByTagName("canvas")[0],A=C.texture({data:k,width:512,height:512,format:"alpha",wrap:"repeat",min:"linear mipmap linear",mag:"linear"}),E=C({vert:"\n      precision mediump float;\n      attribute vec3 position, normal;\n      uniform mat4 model, view, projection;\n      varying vec3 vNormal, voNormal, vPos;\n      void main() {\n        gl_Position = projection * view * model * vec4(position, 1);\n        vNormal = (model * vec4(normal, 1)).xyz;\n        voNormal = normal;\n        vPos = position.xyz;\n      }",frag:"\n      precision mediump float;\n      uniform sampler2D texture;\n      varying vec3 vNormal, voNormal, vPos;\n      void main() {\n        vec3 onormal = normalize(voNormal);\n        vec3 blend = abs(onormal);\n        blend /= blend.x + blend.y + blend.z;\n        vec3 texel = vPos;\n        float tex = 0.0;\n        tex += blend.x * texture2D(texture, texel.yz).a;\n        tex += blend.y * texture2D(texture, texel.xz).a;\n        tex += blend.z * texture2D(texture, texel.xy).a;\n        vec3 lightDir = normalize(vec3(1,0,2));\n        float intensity = 0.5 + 0.5 * clamp(dot(normalize(vNormal), lightDir), 0.0, 1.0);\n        vec3 color = intensity * mix(vec3(0.5,0.0,0), vec3(1,0.5,0.5), tex) + vec3(pow(intensity, 257.0));\n        gl_FragColor = vec4(color,1);\n      }",attributes:{position:C.prop("positions"),normal:C.prop("normals")},uniforms:{texture:A,model:C.prop("model"),view:C.prop("view"),projection:C.prop("projection")},cull:{enable:!0,face:"back"},elements:C.prop("cells"),viewport:C.prop("viewport")}),I=new b(L,{drag:.01});I.spin(20,3);const F=w(N(),[0,0,3],[0,0,0],[0,1,0]),S=function(t={}){const{width:e,height:o,depth:n,radius:r,resolution:s}=i(i({},D),t),m=l(e,o,n);a(m,m,[2*r,2*r,2*r]);const d=new O;for(const i of P){const t=p(c(h(),i.right,m)),e=p(c(h(),i.up,m)),o=c(h(),i.start,m),n=u(h(),o,i.right,r),l=u(h(),o,i.right,t-r),a=u(h(),o,i.up,r),f=u(h(),a,i.right,r),g=u(h(),a,i.right,t-r),v=u(h(),o,i.up,e-r),x=u(h(),v,i.right,r),y=u(h(),v,i.right,t-r);d.index(z(o,i.right,i.up,r,r,s,s)),d.index(z(l,i.right,i.up,r,r,s,s)),d.index(z(v,i.right,i.up,r,r,s,s)),d.index(z(y,i.right,i.up,r,r,s,s)),d.index(z(a,i.right,i.up,r,e-2*r,s,1)),d.index(z(g,i.right,i.up,r,e-2*r,s,1)),d.index(z(n,i.right,i.up,t-2*r,r,1,s)),d.index(z(x,i.right,i.up,t-2*r,r,1,s)),d.index(z(f,i.right,i.up,t-2*r,e-2*r,1,1))}const{positions:f,cells:g}=d,v=[];for(const i of f){const t=M(i,m,r);i[0]=t.position[0],i[1]=t.position[1],i[2]=t.position[2],v.push(t.normal)}return{positions:f.map((t=>[t[0],t[1],t[2]])),normals:v.map((t=>[t[0],t[1],t[2]])),cells:g}}({width:1,height:1.25,depth:1.5}),_=C.buffer(S.positions),B=C.buffer(S.normals),K=C.elements(S.cells);!function t(){const e=j(N(),Math.PI/3,L.width/L.height,.1,100),o={x:0,y:0,width:L.width,height:L.height};C.clear({color:[.8,.9,1,1],depth:1}),E({positions:_,normals:B,cells:K,count:S.positions.length,model:I.rotation,view:F,projection:e,viewport:o}),requestAnimationFrame(t)}();
